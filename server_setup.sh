#!/bin/bash

# =============================================================================
# –°–ö–†–ò–ü–¢ 1: –ù–ê–°–¢–†–û–ô–ö–ê REALITY –°–ï–†–í–ï–†–ê
# –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∫–∞–∫: reality_server_setup.sh
# –ó–∞–ø—É—Å–∫: sudo bash reality_server_setup.sh
# =============================================================================

echo "üöÄ –ù–ê–°–¢–†–û–ô–ö–ê REALITY –°–ï–†–í–ï–†–ê"
echo "============================"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ root
if [[ $EUID -ne 0 ]]; then
   echo "‚ùå –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–∞–≤–∞–º–∏ root: sudo bash reality_server_setup.sh"
   exit 1
fi

echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫..."

# =============================================================================
# –≠–¢–ê–ü 1: –ü–û–õ–ù–ê–Ø –û–ß–ò–°–¢–ö–ê –°–ò–°–¢–ï–ú–´
# =============================================================================

echo "üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤..."

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤—Å–µ—Ö –≤–æ–∑–º–æ–∂–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
systemctl stop xray 2>/dev/null || true
systemctl stop xray.service 2>/dev/null || true
systemctl stop v2ray 2>/dev/null || true
systemctl stop v2ray.service 2>/dev/null || true
systemctl stop v2ray-client 2>/dev/null || true
systemctl stop v2ray-client.service 2>/dev/null || true

systemctl disable xray 2>/dev/null || true
systemctl disable xray.service 2>/dev/null || true
systemctl disable v2ray 2>/dev/null || true
systemctl disable v2ray.service 2>/dev/null || true
systemctl disable v2ray-client 2>/dev/null || true
systemctl disable v2ray-client.service 2>/dev/null || true

echo "üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ —Å–µ—Ä–≤–∏—Å–æ–≤..."

# –£–¥–∞–ª–µ–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–æ–≤
rm -f /etc/systemd/system/xray.service
rm -f /etc/systemd/system/v2ray.service
rm -f /etc/systemd/system/v2ray-client.service
rm -f /lib/systemd/system/xray.service
rm -f /lib/systemd/system/v2ray.service
rm -f /lib/systemd/system/v2ray-client.service

# –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ systemd
systemctl daemon-reload
systemctl reset-failed

echo "üóÇÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤..."

# –£–¥–∞–ª–µ–Ω–∏–µ –∏—Å–ø–æ–ª–Ω—è–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
rm -f /usr/local/bin/xray
rm -f /usr/local/bin/v2ray
rm -f /usr/bin/xray
rm -f /usr/bin/v2ray
rm -f /opt/xray
rm -f /opt/v2ray

echo "üìÅ –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π..."

# –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
rm -rf /etc/xray/
rm -rf /etc/v2ray/
rm -rf /usr/local/etc/xray/
rm -rf /usr/local/etc/v2ray/
rm -rf /var/log/xray/
rm -rf /var/log/v2ray/

echo "üßΩ –£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤..."

# –£–¥–∞–ª–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —Ä–∞–±–æ—á–∏—Ö —Ñ–∞–π–ª–æ–≤
rm -rf /tmp/xray*
rm -rf /tmp/v2ray*
rm -rf /tmp/Xray*
rm -rf /tmp/V2ray*
rm -f /tmp/reality_keys.txt
rm -f /root/reality_config.txt
rm -f /root/reality_check.sh

echo "üîÑ –û—á–∏—Å—Ç–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤..."

# –£–±–∏–≤–∞–µ–º –≤—Å–µ –≤–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã
pkill -f xray 2>/dev/null || true
pkill -f v2ray 2>/dev/null || true
pkill -f reality 2>/dev/null || true

# –ñ–¥–µ–º –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
sleep 2

echo "‚úÖ –°–∏—Å—Ç–µ–º–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—á–∏—â–µ–Ω–∞ –æ—Ç –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–æ–∫"

# =============================================================================
# –≠–¢–ê–ü 2: –°–í–ï–ñ–ê–Ø –£–°–¢–ê–ù–û–í–ö–ê –°–ï–†–í–ï–†–ê
# =============================================================================

echo ""
echo "üöÄ –ù–ê–ß–ò–ù–ê–ï–ú –°–í–ï–ñ–£–Æ –£–°–¢–ê–ù–û–í–ö–£ REALITY –°–ï–†–í–ï–†–ê"
echo "==========================================="

# –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã
echo "üì¶ –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã..."
apt update && apt upgrade -y
apt install wget unzip curl net-tools -y

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏
echo "‚è∞ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏..."
timedatectl set-timezone UTC

# –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ IP
SERVER_IP=$(curl -s ifconfig.me || curl -s ipinfo.io/ip || curl -s icanhazip.com)
echo "üåê –í–Ω–µ—à–Ω–∏–π IP —Å–µ—Ä–≤–µ—Ä–∞: $SERVER_IP"

if [ -z "$SERVER_IP" ]; then
    echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –æ–ø—Ä–µ–¥–µ–ª–∏—Ç—å –≤–Ω–µ—à–Ω–∏–π IP —Å–µ—Ä–≤–µ—Ä–∞!"
    echo "–í–≤–µ–¥–∏—Ç–µ IP —Å–µ—Ä–≤–µ—Ä–∞ –≤—Ä—É—á–Ω—É—é:"
    read -p "IP —Å–µ—Ä–≤–µ—Ä–∞: " SERVER_IP
fi

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–∞–±–æ—á–∏—Ö –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π
echo "üìÅ –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π..."
mkdir -p /etc/xray
mkdir -p /var/log/xray

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Xray
echo "‚¨áÔ∏è –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ Xray..."
cd /tmp
rm -f Xray-linux-64.zip* xray*

# –ü–æ–ø—ã—Ç–∫–∞ —Å–∫–∞—á–∞—Ç—å —Å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∏—Å—Ç–æ—á–Ω–∏–∫–∞
if ! wget -q https://github.com/XTLS/Xray-core/releases/latest/download/Xray-linux-64.zip; then
    echo "‚ö†Ô∏è –û—Å–Ω–æ–≤–Ω–æ–π –∏—Å—Ç–æ—á–Ω–∏–∫ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω, –ø—Ä–æ–±—É–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–π..."
    wget -q https://github.com/XTLS/Xray-core/releases/download/v1.8.23/Xray-linux-64.zip
fi

if [ ! -f "Xray-linux-64.zip" ]; then
    echo "‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å —Å–∫–∞—á–∞—Ç—å Xray!"
    exit 1
fi

unzip -q Xray-linux-64.zip
chmod +x xray

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
if ! ./xray version; then
    echo "‚ùå –ù–µ–ø–æ–¥—Ö–æ–¥—è—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏–ª–∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã–π —Ñ–∞–π–ª!"
    exit 1
fi

mv xray /usr/local/bin/
rm -f Xray-linux-64.zip LICENSE README.md

echo "‚úÖ Xray —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: $(/usr/local/bin/xray version | head -1)"

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–ª—é—á–µ–π
echo "üîë –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤—ã—Ö –∫–ª—é—á–µ–π..."
UUID=$(/usr/local/bin/xray uuid)
KEYS=$(/usr/local/bin/xray x25519)
PRIVATE_KEY=$(echo "$KEYS" | grep "Private key:" | awk '{print $3}')
PUBLIC_KEY=$(echo "$KEYS" | grep "Public key:" | awk '{print $3}')
SHORT_ID=$(openssl rand -hex 4)

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π
if [ -z "$UUID" ] || [ -z "$PRIVATE_KEY" ] || [ -z "$PUBLIC_KEY" ] || [ -z "$SHORT_ID" ]; then
    echo "‚ùå –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∫–ª—é—á–µ–π!"
    exit 1
fi

echo "‚úÖ –ö–ª—é—á–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã —É—Å–ø–µ—à–Ω–æ"

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–ª—é—á–µ–π
cat > /root/reality_config.txt << EOF
SERVER_IP=$SERVER_IP
UUID=$UUID
PRIVATE_KEY=$PRIVATE_KEY
PUBLIC_KEY=$PUBLIC_KEY
SHORT_ID=$SHORT_ID
EOF

cat > /root/reality_info.txt << EOF
=== –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø REALITY –°–ï–†–í–ï–†–ê ===
–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è: $(date)
–í–Ω–µ—à–Ω–∏–π IP: $SERVER_IP
UUID: $UUID
Private Key: $PRIVATE_KEY
Public Key: $PUBLIC_KEY
Short ID: $SHORT_ID

=== –î–õ–Ø –ö–õ–ò–ï–ù–¢–û–í ===
–ê–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞: $SERVER_IP
–ü–æ—Ä—Ç: 443
UUID: $UUID
Public Key: $PUBLIC_KEY
Short ID: $SHORT_ID
SNI: www.microsoft.com
Fingerprint: chrome
Flow: xtls-rprx-vision
Security: reality
Network: tcp
EOF

echo "üíæ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ /root/reality_config.txt –∏ /root/reality_info.txt"

# –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞
echo "‚öôÔ∏è –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞..."
cat > /etc/xray/config.json << EOF
{
  "log": {
    "loglevel": "info",
    "access": "/var/log/xray/access.log",
    "error": "/var/log/xray/error.log"
  },
  "inbounds": [
    {
      "listen": "0.0.0.0",
      "port": 443,
      "protocol": "vless",
      "settings": {
        "clients": [
          {
            "id": "$UUID",
            "flow": "xtls-rprx-vision"
          }
        ],
        "decryption": "none"
      },
      "streamSettings": {
        "network": "tcp",
        "security": "reality",
        "realitySettings": {
          "show": false,
          "dest": "www.microsoft.com:443",
          "xver": 0,
          "serverNames": [
            "www.microsoft.com",
            "microsoft.com"
          ],
          "privateKey": "$PRIVATE_KEY",
          "minClientVer": "1.8.0",
          "maxTimeDiff": 0,
          "shortIds": [
            "",
            "$SHORT_ID"
          ]
        }
      }
    }
  ],
  "outbounds": [
    {
      "protocol": "freedom",
      "tag": "direct"
    },
    {
      "protocol": "blackhole",
      "tag": "block"
    }
  ],
  "routing": {
    "domainStrategy": "IPIfNonMatch",
    "rules": [
      {
        "type": "field",
        "ip": [
          "geoip:private"
        ],
        "outboundTag": "block"
      }
    ]
  }
}
EOF

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
echo "üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏..."
if ! /usr/local/bin/xray test -config /etc/xray/config.json; then
    echo "‚ùå –û—à–∏–±–∫–∞ –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏!"
    cat /etc/xray/config.json
    exit 1
fi

echo "‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞"

# –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞
echo "üîß –°–æ–∑–¥–∞–Ω–∏–µ systemd —Å–µ—Ä–≤–∏—Å–∞..."
cat > /etc/systemd/system/xray.service << EOF
[Unit]
Description=Xray Service
Documentation=https://github.com/xtls
After=network.target nss-lookup.target

[Service]
User=nobody
CapabilityBoundingSet=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
AmbientCapabilities=CAP_NET_ADMIN CAP_NET_BIND_SERVICE
NoNewPrivileges=true
ExecStart=/usr/local/bin/xray run -config /etc/xray/config.json
Restart=on-failure
RestartPreventExitStatus=23
LimitNPROC=10000
LimitNOFILE=1000000

[Install]
WantedBy=multi-user.target
EOF

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
chown -R nobody:nogroup /var/log/xray
chmod 755 /var/log/xray

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞
echo "üõ°Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–µ—Ä–≤–æ–ª–∞..."

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ ufw
if ! command -v ufw &> /dev/null; then
    apt install ufw -y
fi

ufw --force reset
ufw default deny incoming
ufw default allow outgoing
ufw allow ssh
ufw allow 22/tcp
ufw allow 443/tcp
ufw --force enable

echo "‚úÖ –§–∞–µ—Ä–≤–æ–ª –Ω–∞—Å—Ç—Ä–æ–µ–Ω"

# –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞
echo "üöÄ –ó–∞–ø—É—Å–∫ Xray —Å–µ—Ä–≤–∏—Å–∞..."
systemctl daemon-reload
systemctl enable xray
systemctl start xray

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π
sleep 5
if systemctl is-active --quiet xray; then
    echo "‚úÖ Xray —Å–µ—Ä–≤–∏—Å –∑–∞–ø—É—â–µ–Ω —É—Å–ø–µ—à–Ω–æ!"
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–∞
    if netstat -tlnp | grep -q ":443.*xray"; then
        echo "‚úÖ –°–µ—Ä–≤–∏—Å —Å–ª—É—à–∞–µ—Ç –Ω–∞ –ø–æ—Ä—Ç—É 443"
    else
        echo "‚ö†Ô∏è –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ: –ø–æ—Ä—Ç 443 –Ω–µ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç—Å—è"
        netstat -tlnp | grep ":443"
    fi
else
    echo "‚ùå –û—à–∏–±–∫–∞ –∑–∞–ø—É—Å–∫–∞ Xray —Å–µ—Ä–≤–∏—Å–∞!"
    echo "–õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–∞:"
    systemctl status xray --no-pager -l
    echo ""
    echo "–ü–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏:"
    journalctl -u xray --no-pager -n 20
    exit 1
fi

# –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
echo "üîç –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏..."
cat > /root/reality_check.sh << 'EOF'
#!/bin/bash

echo "üîç –î–ò–ê–ì–ù–û–°–¢–ò–ö–ê REALITY –°–ï–†–í–ï–†–ê"
echo "============================="

echo "1. üñ•Ô∏è –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–µ—Ä–∞ Xray:"
systemctl status xray --no-pager -l

echo ""
echo "2. üîó –ü–æ—Ä—Ç—ã (443 –¥–æ–ª–∂–µ–Ω —Å–ª—É—à–∞—Ç—å Xray):"
netstat -tlnp | grep -E "(443|10808|10809)"

echo ""
echo "3. üìä –ü–æ—Å–ª–µ–¥–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è (5 –º–∏–Ω—É—Ç):"
journalctl -u xray --since "5 minutes ago" --no-pager | tail -10

echo ""
echo "4. üåê –í–Ω–µ—à–Ω–∏–π IP —Å–µ—Ä–≤–µ—Ä–∞:"
curl -s ifconfig.me || curl -s ipinfo.io/ip

echo ""
echo "5. ‚è∞ –í—Ä–µ–º—è —Å–µ—Ä–≤–µ—Ä–∞:"
date

echo ""
echo "6. üî• –§–∞–µ—Ä–≤–æ–ª (UFW) —Å—Ç–∞—Ç—É—Å:"
ufw status numbered

echo ""
echo "7. üíæ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∫–ª–∏–µ–Ω—Ç–∞:"
if [ -f /root/reality_info.txt ]; then
    cat /root/reality_info.txt
else
    echo "‚ùå –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω!"
fi

echo ""
echo "8. üîß –ü—Ä–æ—Ü–µ—Å—Å—ã Xray:"
ps aux | grep -E "(xray|v2ray)" | grep -v grep

echo ""
echo "9. üìÅ –§–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞:"
ls -la /etc/xray/
ls -la /usr/local/bin/xray
EOF

chmod +x /root/reality_check.sh

echo ""
echo "üéâ REALITY –°–ï–†–í–ï–† –£–°–¢–ê–ù–û–í–õ–ï–ù –£–°–ü–ï–®–ù–û!"
echo "====================================="
echo ""
echo "üìã –§–∞–π–ª—ã —Å–æ–∑–¥–∞–Ω—ã:"
echo "   üìÑ /root/reality_config.txt - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏"
echo "   üìÑ /root/reality_info.txt - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –¥–ª—è –∫–ª–∏–µ–Ω—Ç–æ–≤"
echo "   üîç /root/reality_check.sh - —Å–∫—Ä–∏–ø—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏"
echo ""
echo "üîÑ –°–õ–ï–î–£–Æ–©–ò–ï –®–ê–ì–ò:"
echo "   1. –î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è QR-–∫–æ–¥–∞: bash reality_qr_generator.sh"
echo "   2. –î–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞: —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ reality_client_setup.sh –Ω–∞ —Å–µ—Ä–≤–µ—Ä —Å n8n"
echo ""
echo "üîß –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–æ–º:"
echo "   - –°—Ç–∞—Ç—É—Å: systemctl status xray"
echo "   - –õ–æ–≥–∏: journalctl -u xray -f"
echo "   - –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞: bash /root/reality_check.sh"
echo ""
echo "‚úÖ –°–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º!"
echo ""
cat /root/reality_info.txt
